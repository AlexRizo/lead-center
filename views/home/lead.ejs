<div class="section lead">
    <div class="cards-content" style="margin: 0 0 40px 0;">
        <div class="principal-info">
            <div class="card principal">
                <img class="profile-img" src="\assets\img\profile.png" alt="profile picture" width="100px">
                <h4 class="username"><%= lead.name %></h4>
                <div class="status">
                    <nav class="status-title">Asignado a:</nav>
                    <nav>
                        <% if (lead.Staff) { %>
                            <%= lead.Staff.name %>
                        <% } else { %>
                            Sin Asignar
                        <% } %>
                    </nav>
                    <nav class="status-title">Estado:</nav>
                    <nav>
                        <% if (lead.contact_status === 0) { %>
                            Pendiente
                        <% } else if (lead.contact_status === 1) { %>
                            En Seguimiento
                        <% } else { %>
                            Contactado
                        <% } %>
                    </nav>
                </div>
            </div>
            <div class="card seller">
                <div class="seller-title">
                    <h4>Notas del vendedor</h4>
                    <button type="button" class="btn" onclick="openModal()">Nueva Nota</button>
                </div>
            </div>
            <div class="notes-section"></div>
        </div>
        <form class="card lead-data lead-card">
            <div class="card-header">
                <h3 class="card-title">
                    Información Personal
                    <span class="section-hide-desktop">
                        <% if (lead.contact_status === 0) { %>
                            - PENDIENTE
                        <% } else if (lead.contact_status === 1) { %>
                            - EN SEGUIMIENTO
                        <% } else { %>
                            - CONTACTADO
                        <% } %>
                    </span>
                </h3>
            </div>
            <div class="card-body">
                <input name="id" type="hidden" id="id" value="<%= lead.id %>"/>
                <input name="contact_status" type="hidden" class="input" id="status" value="<%= lead.contact_status %>"/>
                <div class="input-content">
                    <label for="name">Nombre Completo</label>
                    <input name="name" class="input input-form" type="text" id="name" maxlength="100" required placeholder="Ernesto Hernández" value="<%= lead.name %>"/>
                </div>
                <div class="inputs-content fd-col">
                    <div class="input-content">
                        <label for="city">Ciudad</label>
                        <input name="city" class="input input-form" type="text" id="city" maxlength="100" required placeholder="Colima" value="<%= lead.city %>"/>
                    </div>
                    <div class="input-content">
                        <label for="phone_number">Número de Teléfono</label>
                        <div class="input-action fd-col">
                            <input class="input input-form" name="phone_number" id="phone_number" maxlenght="15" type="tel" required placeholder="Número de teléfono" value="<%= lead.phone_number %>"/>
                            <a class="btn btn-contact" href="https://wa.me/<%= lead.phone_number.replace(/[^\w]/gi, '') %>" target="_blank" rel="noopener noreferrer">Contactar</a>
                        </div>
                    </div>
                </div>
                <div class="input-content">
                    <label for="email">Correo</label>
                    <div class="input-action fd-col">
                        <input name="email" class="input input-form" type="email" id="email" maxlength="100" required placeholder="lead@email.com" value="<%= lead.email %>"/>
                        <a class="btn btn-contact" href="mailto:<%= lead.email %>">Contactar</a>
                    </div>
                </div>
                <div class="inputs-content">
                    <div class="input-content">
                        <label for="date_contact">Fecha de Registro</label>
                        <input name="date_contact" class="input input-form" type="date" id="date_contact" required placeholder="Fecha de registro" value="<%= lead.date_contact %>"/>
                    </div>
                    <div class="input-content">
                        <label for="platformId">Plataforma</label>
                        <select name="platformId" id="platformId" class="input input-form" required>
                                <option value="<%= lead.Platform.id %>" selected><%= lead.Platform.name %></option>
                        </select>
                    </div>
                </div>
                <div class="input-content">
                    <label for="reason">Motivo</label>
                    <input name="reason" class="input input-form" type="text" id="reason" maxlength="500" required placeholder="Terrenos, precios, etc..." value="<%= lead.reason %>"/>
                </div>
                <div class="inputs-content">
                    <div class="input-content">
                        <label for="originId">Campaña de Origen</label>
                        <select name="originId" id="originId" class="input input-form" required>
                            <option value="<%= lead.Origin.id %>" selected><%= lead.Origin.name %></option>
                        </select>
                    </div>
                    <div class="input-content">
                        <label for="staffId">Asignado A:</label>
                        <select name="staffId" id="staffId" class="input input-form" required>
                            <% if (lead.Staff) { %>
                                <option value="<%= lead.Staff.id %>" selected><%= lead.Staff.name %></option>
                            <% } else { %>
                                <option value="0" selected>--Sin Asignar--</option>
                            <% } %>
                        </select>
                    </div>
                </div>
                <div class="input-content hidden">
                    <label for="note">Nota</label>
                    <textarea class="input input-form" name="note" id="note" maxlength="500" cols="30" rows="10" placeholder="Nota..."><%= lead.note %></textarea>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-form submit" hidden type="submit">Guardar</button>
                <button class="btn btn-form follow" type="button">En Seguimiento</button>
                <button class="btn btn-form contacted" type="button">Contactado</button>
            </div>
        </form>
    </div>
</div>

<div class="modal hidden">
    <div class="modal-background modal-animation" onclick="quitModal()"></div>
    <div class="card modal-card card-animation">
        <div class="input-content">
            <label for="name">Deja una nueva nota:</label>
            <textarea class="input-for-modal input-form" name="note" id="name" cols="60" rows="10" maxlength="500" placeholder="Deja una nota..."></textarea>
        </div>
        <div class="modal-actions">
            <button type="submit" class="btn btn-add-seller-note">Crear</button>
            <button class="btn btn-cancel" onclick="quitModal()">Cancelar</button>
        </div>
    </div>
</div>

<script src="/js/home/lead.js"></script>